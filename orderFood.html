<!DOCTYPE html>
<html>
<head>
  <title>点餐</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  <meta name="description" content=" ">

  <link rel="stylesheet" href="lib/weui.min.css">
  <link rel="stylesheet" href="css/jquery-weui.css">
  <link rel="stylesheet" href="css/fonts/iconfont.css">
  <link rel="stylesheet" href="css/canxiaoer.css">

</head>

<body ontouchstart>
  <div class="backBar">
    <a href="javascript:history.back()" class="back">
      <i class="text-icon icon-shop-back"></i>
    </a>
    <p class="title">点餐</p>
  </div>
  <div class="orderFood">
    <nav>
      <li><a href="#cate-0">热销</a></li>
      <li><a href="#cate-1">火锅套餐</a></li>
      <li><a href="#cate-2">小吃饮料</a></li>
      <li><a href="#cate-3">肉类拼盘</a></li>
    </nav>

    <div class="con">
      <div id="cate-0">
        <dl>
          <dt><img src="img/upload/n-a1.jpg" alt=""></dt>
          <dd>
            <div class="title">欢聚一趟套餐1</div>
            <div class="sales">月销 <span>40</span></div>
            <div class="price">
              <span>10</span>
            </div>
            <div class="btnGroup">
              <i class="icon-shop icon-shop-jian"></i>
              <span>0</span>
              <i class="icon-shop icon-shop-jia"></i>
            </div>
          </dd>
        </dl>
        <dl>
          <dt><img src="img/upload/n-a1.jpg" alt=""></dt>
          <dd>
            <div class="title">欢聚一趟套餐2</div>
            <div class="sales">月销 <span>40</span></div>
            <div class="price">
              <span>20</span>
            </div>
            <div class="btnGroup">
              <i class="icon-shop icon-shop-jian"></i>
              <span>0</span>
              <i class="icon-shop icon-shop-jia"></i>
            </div>
          </dd>
        </dl>
        <dl>
          <dt><img src="img/upload/n-a1.jpg" alt=""></dt>
          <dd>
            <div class="title">欢聚一趟套餐3</div>
            <div class="sales">月销 <span>40</span></div>
            <div class="price">
              <span>299</span>
            </div>
            <div class="btnGroup">
              <i class="icon-shop icon-shop-jian"></i>
              <span>0</span>
              <i class="icon-shop icon-shop-jia"></i>
            </div>
          </dd>
        </dl>
      </div>
      <div id="cate-1">
        <dl>
          <dt><img src="img/upload/n-a1.jpg" alt=""></dt>
          <dd>
            <div class="title">欢聚一趟套餐</div>
            <div class="sales">月销 <span>40</span></div>
            <div class="price">
              <span>299</span>
            </div>
            <div class="btnGroup">
              <i class="icon-shop icon-shop-jian"></i>
              <span>0</span>
              <i class="icon-shop icon-shop-jia"></i>
            </div>
          </dd>
        </dl>
        <dl>
          <dt><img src="img/upload/n-a1.jpg" alt=""></dt>
          <dd>
            <div class="title">欢聚一趟套餐</div>
            <div class="sales">月销 <span>40</span></div>
            <div class="price">
              <span>299</span>
            </div>
            <div class="btnGroup">
              <i class="icon-shop icon-shop-jian"></i>
              <span>0</span>
              <i class="icon-shop icon-shop-jia"></i>
            </div>
          </dd>
        </dl>
        <dl>
          <dt><img src="img/upload/n-a1.jpg" alt=""></dt>
          <dd>
            <div class="title">欢聚一趟套餐</div>
            <div class="sales">月销 <span>40</span></div>
            <div class="price">
              <span>299</span>
            </div>
            <div class="btnGroup">
              <i class="icon-shop icon-shop-jian"></i>
              <span>0</span>
              <i class="icon-shop icon-shop-jia"></i>
            </div>
          </dd>
        </dl>
      </div>
      <div id="cate-2" >
        <dl>
          <dt><img src="img/upload/n-a1.jpg" alt=""></dt>
          <dd>
            <div class="title">欢聚一趟套餐</div>
            <div class="sales">月销 <span>40</span></div>
            <div class="price">
              <span>299</span>
            </div>
            <div class="btnGroup">
              <i class="icon-shop icon-shop-jian"></i>
              <span>0</span>
              <i class="icon-shop icon-shop-jia"></i>
            </div>
          </dd>
        </dl>
        <dl>
          <dt><img src="img/upload/n-a1.jpg" alt=""></dt>
          <dd>
            <div class="title">欢聚一趟套餐</div>
            <div class="sales">月销 <span>40</span></div>
            <div class="price">
              <span>299</span>
            </div>
            <div class="btnGroup">
              <i class="icon-shop icon-shop-jian"></i>
              <span>0</span>
              <i class="icon-shop icon-shop-jia"></i>
            </div>
          </dd>
        </dl>
        <dl>
          <dt><img src="img/upload/n-a1.jpg" alt=""></dt>
          <dd>
            <div class="title">欢聚一趟套餐</div>
            <div class="sales">月销 <span>40</span></div>
            <div class="price">
              <span>299</span>
            </div>
            <div class="btnGroup">
              <i class="icon-shop icon-shop-jian"></i>
              <span>0</span>
              <i class="icon-shop icon-shop-jia"></i>
            </div>
          </dd>
        </dl>
        <dl>
          <dt><img src="img/upload/n-a1.jpg" alt=""></dt>
          <dd>
            <div class="title">欢聚一趟套餐</div>
            <div class="sales">月销 <span>40</span></div>
            <div class="price">
              <span>299</span>
            </div>
            <div class="btnGroup">
              <i class="icon-shop icon-shop-jian"></i>
              <span>0</span>
              <i class="icon-shop icon-shop-jia"></i>
            </div>
          </dd>
        </dl>
        <dl>
          <dt><img src="img/upload/n-a1.jpg" alt=""></dt>
          <dd>
            <div class="title">欢聚一趟套餐</div>
            <div class="sales">月销 <span>40</span></div>
            <div class="price">
              <span>299</span>
            </div>
            <div class="btnGroup">
              <i class="icon-shop icon-shop-jian"></i>
              <span>0</span>
              <i class="icon-shop icon-shop-jia"></i>
            </div>
          </dd>
        </dl>
      </div>
      <div id="cate-3" >
        <dl>
          <dt><img src="img/upload/n-a1.jpg" alt=""></dt>
          <dd>
            <div class="title">欢聚一趟套餐</div>
            <div class="sales">月销 <span>40</span></div>
            <div class="price">
              <span>299</span>
            </div>
            <div class="btnGroup">
              <i class="icon-shop icon-shop-jian"></i>
              <span>0</span>
              <i class="icon-shop icon-shop-jia"></i>
            </div>
          </dd>
        </dl>
        <dl>
          <dt><img src="img/upload/n-a1.jpg" alt=""></dt>
          <dd>
            <div class="title">欢聚一趟套餐</div>
            <div class="sales">月销 <span>40</span></div>
            <div class="price">
              <span>299</span>
            </div>
            <div class="btnGroup">
              <i class="icon-shop icon-shop-jian"></i>
              <span>0</span>
              <i class="icon-shop icon-shop-jia"></i>
            </div>
          </dd>
        </dl>
        <dl>
          <dt><img src="img/upload/n-a1.jpg" alt=""></dt>
          <dd>
            <div class="title">欢聚一趟套餐</div>
            <div class="sales">月销 <span>40</span></div>
            <div class="price">
              <span>299</span>
            </div>
            <div class="btnGroup">
              <i class="icon-shop icon-shop-jian"></i>
              <span>0</span>
              <i class="icon-shop icon-shop-jia"></i>
            </div>
          </dd>
        </dl>
        <dl>
          <dt><img src="img/upload/n-a1.jpg" alt=""></dt>
          <dd>
            <div class="title">欢聚一趟套餐</div>
            <div class="sales">月销 <span>40</span></div>
            <div class="price">
              <span>299</span>
            </div>
            <div class="btnGroup">
              <i class="icon-shop icon-shop-jian"></i>
              <span>0</span>
              <i class="icon-shop icon-shop-jia"></i>
            </div>
          </dd>
        </dl>
        <dl>
          <dt><img src="img/upload/n-a1.jpg" alt=""></dt>
          <dd>
            <div class="title">欢聚一趟套餐</div>
            <div class="sales">月销 <span>40</span></div>
            <div class="price">
              <span>299</span>
            </div>
            <div class="btnGroup">
              <i class="icon-shop icon-shop-jian"></i>
              <span>0</span>
              <i class="icon-shop icon-shop-jia"></i>
            </div>
          </dd>
        </dl>
        <dl>
          <dt><img src="img/upload/n-a1.jpg" alt=""></dt>
          <dd>
            <div class="title">欢聚一趟套餐</div>
            <div class="sales">月销 <span>40</span></div>
            <div class="price">
              <span>299</span>
            </div>
            <div class="btnGroup">
              <i class="icon-shop icon-shop-jian"></i>
              <span>0</span>
              <i class="icon-shop icon-shop-jia"></i>
            </div>
          </dd>
        </dl>
        <dl>
          <dt><img src="img/upload/n-a1.jpg" alt=""></dt>
          <dd>
            <div class="title">欢聚一趟套餐</div>
            <div class="sales">月销 <span>40</span></div>
            <div class="price">
              <span>299</span>
            </div>
            <div class="btnGroup">
              <i class="icon-shop icon-shop-jian"></i>
              <span>0</span>
              <i class="icon-shop icon-shop-jia"></i>
            </div>
          </dd>
        </dl>
        <dl>
          <dt><img src="img/upload/n-a1.jpg" alt=""></dt>
          <dd>
            <div class="title">欢聚一趟套餐</div>
            <div class="sales">月销 <span>40</span></div>
            <div class="price">
              <span>299</span>
            </div>
            <div class="btnGroup">
              <i class="icon-shop icon-shop-jian"></i>
              <span>0</span>
              <i class="icon-shop icon-shop-jia"></i>
            </div>
          </dd>
        </dl>
        <dl>
          <dt><img src="img/upload/n-a1.jpg" alt=""></dt>
          <dd>
            <div class="title">欢聚一趟套餐</div>
            <div class="sales">月销 <span>40</span></div>
            <div class="price">
              <span>299</span>
            </div>
            <div class="btnGroup">
              <i class="icon-shop icon-shop-jian"></i>
              <span>0</span>
              <i class="icon-shop icon-shop-jia"></i>
            </div>
          </dd>
        </dl>
        <dl>
          <dt><img src="img/upload/n-a1.jpg" alt=""></dt>
          <dd>
            <div class="title">欢聚一趟套餐</div>
            <div class="sales">月销 <span>40</span></div>
            <div class="price">
              <span>299</span>
            </div>
            <div class="btnGroup">
              <i class="icon-shop icon-shop-jian"></i>
              <span>0</span>
              <i class="icon-shop icon-shop-jia"></i>
            </div>
          </dd>
        </dl>
      </div>
    </div>
  </div>
  <div class="cartGrop">
    <div class="menuList">
      <div class="menuPanel">
        <div class="bg"></div>
        <div class="menuCont">
          <div class="menuHd">购物车 <span class="fr"><i class="icon-shop icon-shop-delete"></i>清空购物车</span></div>
          <dl>
            <dt><div class="title">欢聚一趟套餐</div></dt>
            <dd>
              <div class="price">
                <span>299</span>
              </div>

              <div class="btnGroup">
                <i class="icon-shop icon-shop-jian"></i>
                <span>0</span>
                <i class="icon-shop icon-shop-jia"></i>
              </div>
            </dd>
          </dl>
          <dl>
            <dt><div class="title">欢聚一趟套餐</div></dt>
            <dd>
              <div class="price">
                <span>299</span>
              </div>

              <div class="btnGroup">
                <i class="icon-shop icon-shop-jian"></i>
                <span>0</span>
                <i class="icon-shop icon-shop-jia"></i>
              </div>
            </dd>
          </dl>
          <dl>
            <dt><div class="title">欢聚一趟套餐</div></dt>
            <dd>
              <div class="price">
                <span>299</span>
              </div>

              <div class="btnGroup">
                <i class="icon-shop icon-shop-jian"></i>
                <span>0</span>
                <i class="icon-shop icon-shop-jia"></i>
              </div>
            </dd>
          </dl>
        </div>
      </div>
    </div>
    <div class="con">
      <div class="cart"> <div class="weui-badge">0</div> </div>
      <div class="totalPrice"><span>0</span></div>
      <div class="gotoPay">去结算</div>

    </div>
  </div>

<script src="lib/jquery-2.1.4.js"></script>
<script src="lib/fastclick.js"></script>
<script>
$(function() {
  FastClick.attach(document.body);
});
</script>
<script src="js/jquery-weui.js"></script>
<script>
  $(function () {
      var cateOn = $('.orderFood nav li');
      cateOn.first().addClass('on');
      cateOn.click(function () {
          $(this).addClass('on').siblings().removeClass('on');
      });

      var jia = $('.icon-shop-jia'),
          jian = $('.icon-shop-jian'),
          totalPrice = parseFloat( $('.totalPrice span').text() );

//      jia click
      jia.click(function () {
          var num = $(this).prev().text(); //单个菜品份数
          var all = parseInt(num) + 1;
          $(this).prev().text(all);  //单个菜品总数

          var price = parseFloat( $(this).parent().siblings('.price').children().text() ); //单价
          $('.totalPrice span').text(  totalPrice += price ); // 总价

          var count = parseInt( $('.weui-badge').text() );  //计数
          $('.weui-badge').text( count += 1 );

          //console.log(price);
      });

//      jian
      jian.click(function () {
          var num = $(this).next().text();
          var all = parseInt(num) - 1;
          $(this).next().text(all);  //菜品份数相加

          var price = parseFloat( $(this).parent().siblings('.price').children().text() ); //单价
          $('.totalPrice span').text(  totalPrice -= price ); // 总价

          var count = parseInt( $('.weui-badge').text() );  //计数
          $('.weui-badge').text( count -= 1 );

//          console.log(price);
      });
  });

  //减少数量有问题, 暂且记录
</script>
</body>

</html>
