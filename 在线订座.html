<!DOCTYPE html>
<html>
<head>
  <title>在线订座</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  <meta name="description" content=" ">

  <link rel="stylesheet" href="lib/weui.min.css">
  <link rel="stylesheet" href="css/jquery-weui.css">
  <link rel="stylesheet" href="css/fonts/iconfont.css">
  <link rel="stylesheet" href="css/canxiaoer.css">

</head>

<body ontouchstart>
  <div class="backBar">
    <a href="javascript:history.back()" class="back">
      <i class="text-icon icon-shop-back"></i>
    </a>
    <p class="title">在线订座&订餐</p>
  </div>
  <div class="border-t10">
    <a id="renshu" href="#" class="dis-f">
      <p>人数&桌数</p>
      <span class="fz12 hui94">请选择</span>
    </a>
    <a id="shijian" href="#" class="dis-f">
      <p>时间</p>
      <span class="fz12 hui94">请选择</span>
    </a>
    <a id="baojian" href="#" class="dis-f">
      <p>预定包间</p>
        <div class="weui-cell__ft scale90">
          <input id="room" class="weui-switch" type="checkbox">
        </div>
    </a>
  </div>
  <div class="reserve">
    <div class="weui-cells weui-cells_form fz14">
      <div class="weui-cell">
        <div class="weui-cell__hd"><label class="weui-label">姓名</label></div>
        <div class="weui-cell__bd">
          <input name="name" class="weui-input" type="text" placeholder="输入您的姓名">
        </div>
      </div>
      <div class="weui-cell">
        <div class="weui-cell__hd"><label class="weui-label">联系方式</label></div>
        <div class="weui-cell__bd">
          <input name="tel" class="weui-input" type="number" pattern="[0-9]*" placeholder="请输入手机号码">
        </div>
      </div>
      <div class="weui-cell">
        <div class="weui-cell__hd"><label class="weui-label">备注</label></div>
        <div class="weui-cell__bd">
          <textarea name="liuyan" class="weui-textarea" placeholder="给商家留言" rows="1"></textarea>
        </div>
      </div>
    </div>
    <div class="reserve-btn p075 fz16">
      <a href="javascript:;" class="weui-btn weui-btn_orange">订座并点餐</a>
      <a href="javascript:;" class="weui-btn weui-btn_plain-orange">只订座</a>
    </div>
  </div>

  <div id="modal" class="modal">
    <div class="container">
      <div class="bg"></div>
      <div class="select">
        <div class="hd">请选择用餐时间 <i class="cls">x</i></div>
        <div class="bd">
          <ul class="days" id="days">
            <!--<li class="on"><span>今天</span><span>08-31</span></li>-->
          </ul>
          <ul class="hours" id="hours">
            <li><span>11:00</span></li>
            <li><span>11:30</span></li>
            <li><span>12:00</span></li>
            <li><span>12:30</span></li>
            <li><span>13:00</span></li>
            <li><span>13:30</span></li>
            <li><span>14:00</span></li>
            <li><span>14:30</span></li>
            <li><span>15:00</span></li>
            <li><span>15:30</span></li>
            <li><span>16:00</span></li>
            <li><span>16:30</span></li>
            <li><span>17:00</span></li>
            <li><span>17:30</span></li>
            <li><span>18:00</span></li>
            <li><span>18:30</span></li>
            <li><span>19:00</span></li>
            <li><span>19:30</span></li>
            <li><span>20:00</span></li>
            <li><span>20:30</span></li>
            <li><span>21:00</span></li>
            <li><span>21:30</span></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <div id="modal2" class="modal ">
    <div class="container">
      <div class="bg"></div>
      <div class="select">
        <div class="hd">请选择人数和桌数 <i class="cls">x</i></div>
        <div class="bd">
          <ul class="days " id="people">

          </ul>
          <ul class="hours" id="desk">

          </ul>
        </div>
      </div>
    </div>
  </div>



<script src="lib/jquery-2.1.4.js"></script>
<script src="lib/fastclick.js"></script>
<script>
$(function() {
  FastClick.attach(document.body);
});
</script>
<script src="js/jquery-weui.js"></script>
<script src="src/js/canxiaoer.js"></script>
<script>
  $(function () {

      var t = new Date(),
          year = t.getFullYear(), //年
          day = t.getDay(), //星期
          date = t.getDate(),  // 几号
          month = t.getMonth()+1; //月份
      var startM = '00';
      var startH = t.setHours( 11);

      /*switch (day){
          case 0: {
              day = '周日';
              break;
          }
          case 1: {
              day = '周一';
              break;
          }
          case 2: {
              day = '周二';
              break;
          }
          case 3: {
              day = '周三';
              break;
          }
          case 4: {
              day = '周四';
              break;
          }
          case 5: {
              day = '周五';
              break;
          }
          case 6: {
              day = '周六';
              break;
          }

      }*/
      var days = $('#days span:last-of-type'),
          hours = $('#hours'),
          li = $('<li><span>' + day + '</span><span>' + month+'-'+date + '</span></li>');

      for( var i = 0; i<=15; i++) {
          var sj = year + '-' + month + '-' + (date+i);
          var day = "周"+"日一二三四五六 ".charAt(new   Date(sj).getDay());//不能和上面那句变换顺序

          $('#days').append(
              $('<li><span>' + month + '月' + (date+i) + '日'  + '</span>&nbsp;<span>' + day + '</span>&nbsp;</li>')
          );
      }

      //关闭窗口
      $('#shijian').click(function () {
         $('#modal').show();
      });
      $('.modal .bg').click(function () {
          $('.modal').hide();
      });
      $('.cls').on('click',function () {
          $('.modal').hide();
      });

      //选择时间

      $('.select .hours li').on('click',function () {
          $(this).addClass('on').siblings().removeClass('on');
          var timer = $('#modal .days li.on').text() + $('#modal .hours li.on').text();
          $('#shijian span').text(timer);
          $('#modal').hide();
      });

      //选择人数和桌数
      $('#renshu').click(function () {
          $('#modal2').show();
      });
      for(var r=5;r<=30;r++){
          $('#people').append(
              '<li><span>'+r+'人'+'</span></li>'
          )
      }
      for( var d=1; d<=10;d++){
          $('#desk').append(
              '<li><span>'+d+'桌'+'</span></li>'
          )
      }
      $('#modal2 .hours li').on('click',function () {
          $(this).addClass('on').siblings().removeClass('on');
          $('#renshu span:first-of-type').html(($('#people  li.on').text()));
          $('#renshu').append($('#desk li.on').html());
          $('#modal2').hide();
      });



      //选中效果
      $('.select .days li:first-of-type').addClass('on');
      $('.select .hours li:first-of-type').addClass('on');
      $('.select .days li').on('click',function () {
          $(this).addClass('on').siblings().removeClass('on');
      });

      var peopel = parseInt( $('#people .on').text() );
      var desk = parseInt( $('#desk .on').text() );

      $('#room').is(':checked')? room=1:room=0;

      var name = $('input[name="name"]').val();
      var tel = $('input[name="tel"]').val();
      var liuyan = $('textarea[name="liuyan"]').val();


      //传参数
      var x = {
          UID: 'lp',
          DAID:'222'

      };
      data:{
        x1111 
      }
      console.log(liuyan);



  });

</script>


</body>

</html>
